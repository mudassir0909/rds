/*! rds - v0.0.0 - 2015-08-14
* Copyright (c) 2015 ; Licensed  */
!function(){function a(){function a(a,d){c[a]=new b(d)}function b(a){this.serialize=a.serialize,this.deserialize=a.deserialize}var c={},d={serialize:function(a){return _.isFunction(a.toString)?a.toString():a}},e={deserialize:function(a,b){var c=Number(a);return b=b||{},a||!b.allowBlank?isNaN(c)?b.allowBlank?null:0:b.integer?parseInt(c,10):c:void 0}},f={deserialize:function(a){return!!a}};d.deserialize=d.serialize,e.deserialize=e.serialize,f.deserialize=f.serialize,this.registerDataTransform=a,a("string",d),a("number",e),a("boolean",f),this.$get=["Restangular","$parse",function(a,b){function d(){function a(a,b){return new f(a,b)}function b(a,b){return new e(a,b)}var c={defineResource:a,property:b};return c}function e(a,b){this.name=a,this.options=b}function f(b,d){function f(a){var b={};return _(a).each(function(a,c){a instanceof e&&(b[c]=a)}),b}function g(a){var b={};return _(a).each(function(a,c){_.isFunction(a)&&(b[c]=a)}),b}var j=f(d),k=g(d),l=d.idAttribute,m=d.defaults;i[b]=l,a.extendModel(b,function(a){return _(a).extend(k),a}),a.addElementTransformer(b,!1,function(a){var d=!a[i[b]||"id"];d&&_(a).extend(m),_(j).each(function(b,d){var e=c[b.name];a[d]=e.deserialize(a[d],b.options)})}),a.addRequestInterceptor(function(a){return _(j).each(function(b,d){var e=c[b.name];a[d]=e.serialize(a[d],b.options)}),a}),this.$restangular=a.service(b),this.$new=function(c){var d=a.restangularizeElement(null,c,b);return new h(d)}}function g(a){var b=this;this.isLoaded=!1,this.$promise=a,this.records=[],a.then(function(a){_(a).each(function(a){b.records.push(new h(a,b))})})["finally"](function(){b.isLoaded=!0})}function h(a,b){var c,d,e;_(this).extend(a),this.isLoaded=!1,this.setCollection(b),c=this.get,d=this.save,e=this.remove,this.get=function(){var a=this;return this.isLoaded=!1,this.$promise=c.apply(this,arguments)["finally"](function(){a.isLoaded=!0}),this},this.save=function(){var a=this;return this.isSaving=!0,this.$promise=d.apply(this,arguments)["finally"](function(){a.isSaving=!1}),this},this.remove=function(){if(!this.isNewRecord()){var a=this;return this.isRemoving=!0,this.$promise=e.apply(this,arguments).then(function(){_.isArray(a.collection)&&a.collection.splice(a.collection.indexOf(a),1)}),this}},this.refresh=_.bind(this.get,this)}var i={},j=a.configuration.getIdFromElem;return a.configuration.getIdFromElem=function(a){var c=i[a.route];return c?b(c)(a):_.isFunction(j)?j(a):void 0},f.prototype={findAll:function(){var a=this.$restangular.getList.apply(this.$restangular,arguments);return new g(a)},find:function(){var a=arguments[0],b=_.rest(arguments),c=this.$restangular.one(a),d=new h(c);return d.$promise=d.get.apply(d,b),d},create:function(a){var b=this.$new(a);return b.save()}},g.prototype={push:function(a){return a.setCollection(this),this.records.push(a),this},pushObjects:function(a){return _(a).each(this.push,this),this}},h.prototype={isNewRecord:function(){var a=i[this.route]||"id";return!this[a]},setCollection:function(a){return this.collection=a,this}},d()}]}var b=angular.module("rds",[]);b.provider("RDS",a)}();